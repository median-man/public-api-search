(()=>{"use strict";const t=new Set(JSON.parse(localStorage.getItem("favorites"))||[]),e=e=>{const n=e.children,r={};return r.auth=n[2].textContent,r.cors=n[4].textContent,r.description=n[1].textContent,r.https=n[3].textContent,r.title=n[0].textContent,r.url=n[0].firstElementChild.getAttribute("href"),r.category=e.closest("table").previousElementSibling.textContent,r.isFavorite=t.has(r.title),r},n=async()=>{try{const n=await fetch("https://raw.githubusercontent.com/public-apis/public-apis/master/README.md");return n.ok?(n=>{const r=document.createElement("div"),a=new remarkable.Remarkable;r.innerHTML=a.render(n);const o=r.querySelectorAll("tbody tr");return(e=>{const n=({cors:t,https:n,isFavorite:r,search:a,title:o})=>{let s=e.filter((e=>!(t&&"Yes"!==e.cors||n&&"Yes"!==e.https||r&&!e.isFavorite)));return o&&(s=e.filter((t=>t.title===o))),a&&(s=s.filter((t=>e=>Object.entries(e).filter((([,t])=>"string"==typeof t)).map((([,t])=>t.toLowerCase())).some((e=>e.includes(t))))(a))),s};return{all:()=>[...e],find:n,toggleFavorite:e=>{const[r]=n({title:e});return r.isFavorite=!r.isFavorite,r.isFavorite?t.add(r.title):t.delete(r.title),localStorage.setItem("favorites",JSON.stringify([...t])),r.isFavorite}}})(Array.from(o).map(e))})(await n.text()):(console.log(n.status,n.statusText),!1)}catch(t){return console.log(t),!1}},r=(t,e)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout((()=>t(...r)),e)}},a=()=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");return[["width","16"],["height","16"],["fill","currentColor"],["viewBox","0 0 16 16"]].forEach((([e,n])=>t.setAttribute(e,n))),t},o=window.matchMedia("(prefers-color-scheme: dark)").matches,s="theme",l="dark",i="light";let c=o?l:i;const d=[],h="btn-outline-info",u="btn-outline-secondary",m=t=>{t.classList.remove(u),t.classList.add(h),t.title="Switch to light theme";const e=(()=>{const t=a();return t.setAttribute("class","bi bi-brightness-high-fill"),t.innerHTML='<path d="M12 8a4 4 0 1 1-8 0 4 4 0 0 1 8 0zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>',t})();e.setAttribute("aria-hidden","true"),t.innerHTML="",t.append(e)},g=t=>{t.classList.remove(h),t.classList.add(u),t.title="Switch to dark theme";const e=(()=>{const t=a();return t.setAttribute("class","bi bi-moon-stars-fill"),t.innerHTML='<path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>',t})();e.setAttribute("aria-hidden","true"),t.innerHTML="",t.append(e)},b=(t,e)=>{c=e,localStorage.setItem(s,c),d.forEach((t=>t(e))),(e===i?g:m)(t)},v=t=>{const e=(()=>{const t=document.createElement("button");return t.type="button",t.classList="btn btn-theme-toggle btn-sm position-absolute top-0 end-0 p-0 mt-2 me-2 rounded-circle d-flex justify-content-center align-items-center",t.setAttribute("aria-label","Toggle color theme"),t.addEventListener("click",(t=>{(t=>{b(t,c===l?i:l)})(t.currentTarget)})),t})();c=localStorage.getItem(s)||c,b(e,c),t.prepend(e)},p=()=>c===l,f=t=>{d.push(t),t(c)};let L,y,w,S,A,C,E;const M=t=>`\n    <tr>\n      <td>\n        <span data-entryTitle="${t.title}" class="favorite">\n          ${t.isFavorite?'\n  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">\n    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>\n  </svg>\n':'\n  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>\n  </svg>'}\n        </span>\n      </td>\n      <td><a href="${t.url}">${t.title}</a></td>\n      <td>${t.category}</td>\n      <td>${t.description}</td>\n      <td>${t.auth}</td>\n      <td>${t.https}</td>\n      <td>${t.cors}</td>\n    </tr>\n  `,x=()=>p()?E.classList.add("table-dark"):E.classList.remove("table-dark"),k=({entries:t})=>{x(),E.innerHTML="\n  <thead>\n    <tr>\n      <th></th>\n      <th>API</th>\n      <th>Category</th>\n      <th>Description</th>\n      <th>Auth</th>\n      <th>HTTPS</th>\n      <th>CORS</th>\n    </tr>\n  </thead>"+(t=>`<tbody>${t.map(M).join("")}</tbody>`)(t)};document.addEventListener("DOMContentLoaded",(async function(){const t=document.querySelector("#error-view"),e=document.querySelector("#loader"),a=document.querySelector("#top-button");v(document.querySelector("#wrapper")),f((()=>p()?(document.body.classList.add("bg-dark","text-light"),void document.querySelectorAll(".btn-outline-primary").forEach((t=>{t.classList.remove("btn-outline-primary"),t.classList.add("btn-outline-info")}))):(document.body.classList.remove("bg-dark","text-light"),void document.querySelectorAll(".btn-outline-info").forEach((t=>{t.classList.add("btn-outline-primary"),t.classList.remove("btn-outline-info")}))))),document.addEventListener("scroll",r((()=>{window.scrollY>1.3*window.innerHeight?a.style.opacity=.8:a.style.opacity=0}),50));const o=await n(),s=()=>{const{cors:t,favorites:e,https:n,search:r}={cors:L.checked,favorites:y.checked,https:w.checked,search:S.value.trim()};var a;a=o.find({cors:t,https:n,isFavorite:e,search:r}),k({entries:a})};if(o){const t=t=>{o.toggleFavorite(t),s()};(({entries:t,onFavoriteChange:e,onChange:n})=>{L=document.querySelector("#cors-toggle"),y=document.querySelector("#favorites-toggle"),w=document.querySelector("#https-toggle"),S=document.querySelector("#search-input"),A=document.querySelector("#table-buttons"),C=document.getElementById("table-view"),E=document.createElement("table"),E.classList.add("table"),C.append(E),A.addEventListener("change",n),S.addEventListener("input",n),E.addEventListener("click",(t=>e=>{const n=e.target.closest(".favorite");if(n){const e=n.getAttribute("data-entryTitle");t(e)}})(e)),f(x),k({entries:t})})({entries:o.all(),onChange:r(s,120),onFavoriteChange:t}),L.disabled=!1,y.disabled=!1,w.disabled=!1,S.disabled=!1,C.classList.remove("d-none"),e.classList.add("d-none")}else t.classList.remove("d-none")}))})();